"use strict";$(function(){var n=$("#lunbo li").size()*($("#lunbo li").eq(0).outerWidth()+30);$("#lunbo ul").css("width",n);var e,t=5*($("#lunbo li").eq(0).outerWidth()+30),c=null;function a(){$("#lunbo ul").animate({left:-t},2e3,function(){$("#lunbo li:lt(5)").insertAfter($("#lunbo li:last")),$("#lunbo ul").css("left",0)})}clearInterval(c),c=setInterval(a,5e3),$("#lunbo").hover(function(){clearInterval(c)},function(){clearInterval(c),c=setInterval(a,5e3)}),$("#lunbo .left").click(function(){!function(){for(var n=0;n<5;n++)$("#lunbo li:last").insertBefore($("#lunbo li:first")),$("#lunbo ul").css("left",-t),$("#lunbo ul").animate({left:0},2e3)}()}),$("#lunbo .right").click(function(){a()}),(e=$.cookie("user"))?($("#main .p_one").css("display","block"),$("#main .p_one span").text(e),$("#main .p_tow").css("display","none")):($("#main .p_one").css("display","none"),$("#main .p_tow").css("display","block")),$("#main .out").click(function(){confirm("您确定要退出吗？")&&($.cookie("user",null,{expires:-1,path:"/"}),$.cookie("pswd",null,{expires:-1,path:"/"}),location.href="http://localhost/wwwww/src/index.html")}),$("#main .goin").click(function(){location.href="http://localhost/wwwww/src/html/login.html"});var o=getid("car_goods"),r="../api/car.php";ajax("get",r,"",function(n){var e=JSON.parse(n).map(function(n){return"<tr date-id="+n.id+'>\n                        <td><input class="check" type="checkbox"></td>\n                        <td width="97" valign="top">\n                            <div>\n                                <img src="../img/details/Details/'+n.img+'.jpg" alt="">\n                            </div>\n                        </td>\n                        <td class="good_name" valign="top">\n                            <p><a href="javascript:;">'+n.name+"</a></p>\n                            <p>颜色："+n.color+'</p>\n                        </td>\n                        <td valign="top">\n                            <span>'+n.place+'</span>\n                        </td>\n                        <td valign="top">\n                            <div>\n                                <span>￥</span> <span class="danjia">'+n.price+'</span>\n                            </div>\n                        </td>\n                        <td valign="top">\n                            <div>\n                                <span class="sub">-</span>\n                                <input class="numb" type="text" value="'+n.num+'">\n                                <span class="add">+</span>\n                            </div>\n                        </td>\n                        <td valign="top">\n                            <div>\n                                <span>￥</span> <span class="xiaoji">'+n.num*n.price+'</span>\n                            </div>\n                        </td>\n                        <td valign="top">\n                            <span class="dele">删除</span>\n                        </td>\n                    </tr>'});o.innerHTML+=e.join("")}),function(){function t(n){var e=n.parent().prev().find(".danjia").text(),t=n.parent().find("input").val()*e;n.parent().next().find(".xiaoji").text(t),i()}function c(){0==$("#car tbody tr").size()&&($("#main").css("display","none"),$("#null-car").css("display","block"))}$("#car").on("click",".add",function(){var n=$(this).prev().val();10<=++n&&(n=10),$(this).prev().val(n);var e=$(this).parent().parent().parent().attr("date-id");ajax("get",r,"type=add_btn&number="+n+"&goodsid="+e,function(n){JSON.parse(n)}),t($(this).parent())}),$("#car").on("click",".sub",function(){var n=$(this).parent().find("input").val();--n<=1&&(n=1),$(this).parent().find("input").val(n);var e=$(this).parent().parent().parent().attr("date-id");ajax("get",r,"type=sub_btn&number="+n+"&goodsid="+e,function(n){var e=JSON.parse(n);console.log(e)}),t($(this).parent())}),$("#car").on("click",".dele",function(){if(confirm("您确定要删除该行吗？")){$(this).parent().parent().remove();var n=$(this).parent().parent().attr("date-id");ajax("get","../api/car.php","type=deleOne&goodsid="+n,function(n){JSON.parse(n)})}c(),i()});var a=!0;function n(n,e){$(n).on("click",function(){a?($(this).prop("checked","checked"),$(e).prop("checked","checked"),$(".check").prop("checked","checked"),$(".check").parent().parent().css("background","#fdf0ef"),$(".bto-2 div").eq(4).css({"background-color":"#d32220",color:"#fff",cursor:"pointer"})):($(this).removeAttr("checked"),$("#choseAll-2").prop("checked",""),$(".check").removeAttr("checked"),$(".check").parent().parent().css("background","#fff"),$(".bto-2 div").eq(4).css({"background-color":"#e4e4e4",color:"#999",cursor:"not-allowed"})),a=!a,i()})}n($("#choseAll-1"),$("#choseAll-2")),n($("#choseAll-2"),$("#choseAll-1"));var o=[];function i(){o.length=0;for(var n=$("tbody tr").size(),e=0;e<n;e++)$("tbody tr .check").eq(e).prop("checked")&&o.push(e);0==o.lenght&&$(".bto-2 div").eq(4).css({"background-color":"#e4e4e4",color:"#999",cursor:"not-allowed"});var t=0,c=0;for(e=0;e<o.length;e++)t+=1*$("#car .numb").eq(o[e]).val(),c+=1*$("#car .xiaoji").eq(o[e]).text();$("#car .allnum").text(t),$("#car .total-price").html(c)}$("#car").on("click",".deleAll",function(){if(confirm("您确定要删除多行吗？"))for(var n=o.length-1;0<=n;n--){var e=$("#car_goods tr").eq(n).attr("date-id");ajax("get","../api/car.php","type=deleOne&goodsid="+e,function(n){JSON.parse(n)}),$(".good_name").parent().eq(o[n]).remove()}c(),i()}),$("#car").on("click",".check",function(){i(),$(this).is(":checked")?($(this).parent().parent().css("background","#fdf0ef"),$(".bto-2 div").eq(4).css({"background-color":"#d32220",color:"#fff",cursor:"pointer"})):$(this).parent().parent().css("background","#fff"),o.length==$(".check").size()?($("#choseAll-1").prop("checked","checked"),$("#choseAll-2").prop("checked","checked")):($("#choseAll-1").prop("checked",""),$("#choseAll-2").prop("checked",""))})}()});